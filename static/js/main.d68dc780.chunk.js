(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(291)},112:function(e,t,a){},114:function(e,t,a){},291:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(17),r=a.n(l),c=(a(112),a(48)),s=a(18),i=a(19),u=a(21),h=a(20),m=a(22),d=a(5),p=(a(114),function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.stockTable;return o.a.createElement("div",{className:"tableOfStocks"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Unit value"),o.a.createElement("th",null,"Quantity"),o.a.createElement("th",null,"Total value"),o.a.createElement("th",null,"Select"))),o.a.createElement("tbody",null,t.map(function(t){return o.a.createElement("tr",{key:t.name},o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.unitValue,e.props.currency),o.a.createElement("td",null,t.quantity),o.a.createElement("td",null,t.totalValue,e.props.currency),o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",onChange:function(){return e.props.checkboxClick(t.name)}})))}))))}}]),t}(n.Component)),f=a(23),b=a.n(f),k=a(41),y=a.n(k),S=a(32),E=a.n(S),v=a(35),g=a.n(v),w=a(34),C=a.n(w),O=a(33),j=a.n(O),N=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.stockSymbol,a=this.props.stockQuantity;return o.a.createElement(E.a,{open:this.props.show,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(j.a,{id:"form-dialog-title"},"Add new stock"),o.a.createElement(C.a,null,o.a.createElement(y.a,{autoFocus:!0,margin:"dense",name:"newStockSymbol",label:"Enter the stock symbol",type:"text",value:t,fullWidth:!0,onChange:this.props.handleChange}),o.a.createElement(y.a,{margin:"dense",name:"newStockQuantity",label:"Number of shares",type:"number",value:a,fullWidth:!0,onChange:this.props.handleChange})),o.a.createElement(g.a,null,o.a.createElement(b.a,{onClick:this.props.handleClose,color:"primary"},"Cancel"),o.a.createElement(b.a,{onClick:function(){return e.props.addStock(t,a)},color:"primary"},"OK")))}}]),t}(n.Component),V=a(36),T=a.n(V),x=a(106),P=a.n(x),R=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.stockValues,t=["red","green","blue","black","yellow","magenta","cyan","purple","brown","orange"],a=e.map(function(e,a){return{x:e.x,y:e.y,type:"scatter",mode:"lines+points",marker:{color:t[a%10]},name:e.name}});return o.a.createElement(E.a,{open:this.props.showGraph,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"md"},o.a.createElement(j.a,{id:"form-dialog-title"},this.props.portfolioName),o.a.createElement(C.a,null,o.a.createElement(P.a,{data:a,layout:{width:600,height:400}})),o.a.createElement(g.a,null,o.a.createElement(b.a,{onClick:this.props.handleClose,color:"primary"},"Close")))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleClose=function(){a.setState({show:!1}),a.setState({showGraph:!1})},a.state={newStockSymbol:"",newStockQuantity:0,selectedStock:[],stocks:[],totalValue:0,show:!1,showGraph:!1,currencyEur:!1,stockValues:[]},a.changeCurrency=a.changeCurrency.bind(Object(d.a)(Object(d.a)(a))),a.countNewValues=a.countNewValues.bind(Object(d.a)(Object(d.a)(a))),a.getExchangeRate=a.getExchangeRate.bind(Object(d.a)(Object(d.a)(a))),a.addStock=a.addStock.bind(Object(d.a)(Object(d.a)(a))),a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleClose=a.handleClose.bind(Object(d.a)(Object(d.a)(a))),a.checkboxClick=a.checkboxClick.bind(Object(d.a)(Object(d.a)(a))),a.countTotalValue=a.countTotalValue.bind(Object(d.a)(Object(d.a)(a))),a.removeSelectedStocks=a.removeSelectedStocks.bind(Object(d.a)(Object(d.a)(a))),a.setRealTimeValueAndTotal=a.setRealTimeValueAndTotal.bind(Object(d.a)(Object(d.a)(a))),a.updateRealTimeValueAndTotal=a.updateRealTimeValueAndTotal.bind(Object(d.a)(Object(d.a)(a))),a.drawGraph=a.drawGraph.bind(Object(d.a)(Object(d.a)(a))),a.getLast100StockValues=a.getLast100StockValues.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({stocks:JSON.parse(localStorage.getItem(this.props.name))},function(){e.state.stocks.forEach(function(t){var a={name:t.name,quantity:t.quantity};e.updateRealTimeValueAndTotal(a)})})}},{key:"changeCurrency",value:function(e){var t=this,a=this.state.currencyEur;"euro"!==e||a?"USD"===e&&a&&this.setState({currencyEur:!1},function(){t.countNewValues()}):this.setState({currencyEur:!0},function(){t.countNewValues()})}},{key:"countNewValues",value:function(){var e=this.state.stocks,t=this.state.currencyEur?1/this.getExchangeRate():this.getExchangeRate();e.forEach(function(e){e.unitValue=(e.unitValue*t).toFixed(2),e.totalValue=(e.unitValue*e.quantity).toFixed(2)}),this.forceUpdate()}},{key:"getExchangeRate",value:function(){var e=this.props.EurToUSD;return parseFloat(e["Realtime Currency Exchange Rate"]["5. Exchange Rate"])}},{key:"getStockValue",value:function(e){var t=Object.keys(e["Time Series (5min)"])[0];return(parseFloat(e["Time Series (5min)"][t]["1. open"])+parseFloat(e["Time Series (5min)"][t]["2. high"])+parseFloat(e["Time Series (5min)"][t]["3. low"])+parseFloat(e["Time Series (5min)"][t]["4. close"]))/4}},{key:"setRealTimeValueAndTotal",value:function(e){var t=this,a=this.state.stocks,n="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol="+e.name+"&interval=5min&apikey=OHK5U5NEHY5FSE6A";T.a.get(n).then(function(n){n.data.Note?(alert("Reached API-call-limit or unable to find price for given stock name! Unit value is set to 5 USD."),e.unitValue=5,e.totalValue=(e.unitValue*e.quantity).toFixed(2)):(e.unitValue=t.getStockValue(n.data).toFixed(2),e.totalValue=(e.unitValue*e.quantity).toFixed(2),a.push(e),t.setState({stocks:a}),localStorage.setItem(t.props.name,JSON.stringify(a)))})}},{key:"updateRealTimeValueAndTotal",value:function(e){var t=this,a=this.state.stocks,n="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol="+e.name+"&interval=5min&apikey=OHK5U5NEHY5FSE6A";T.a.get(n).then(function(n){if(n.data.Note)alert("Already fetched 5 times within a minute from Alphavantage. Cannot fetch more.");else{var o=t.getStockValue(n.data).toFixed(2),l=(o*e.quantity).toFixed(2),r=a.map(function(e){return e.name}).indexOf(e.name);a[r]={name:e.name,quantity:e.quantity,unitValue:o,totalValue:l},t.setState({stocks:a})}})}},{key:"addStock",value:function(e,t){var a=this.state.stocks;if(a.length<50)if(a.map(function(e){return e.name}).includes(e.toUpperCase()))alert("The stock name already exists"),this.setState({newStockSymbol:"",newStockQuantity:0});else if(0<e.length&&e.length<6&&t>0){var n={name:e.toUpperCase(),quantity:t};this.setRealTimeValueAndTotal(n),this.handleClose(),this.setState({newStockSymbol:"",newStockQuantity:0})}else t<1?alert("Number of shares must be bigger than 0"):e.length<0||e.length>5?alert("Stock symbol can have 1 to 5 letters"):this.handleClose();else alert("Portfolio can only contain 50 different stocks. You need to first remove one to add a new stock"),this.setState({newStockSymbol:"",newStockQuantity:0})}},{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"checkboxClick",value:function(e){var t=this.state.selectedStock;t.includes(e)?(t.splice(t.indexOf(e),1),this.setState({selectedStock:t})):(t.push(e),this.setState({selectedStock:t}))}},{key:"countTotalValue",value:function(){var e=this.state.stocks,t=0;return e.forEach(function(e){return t+=parseFloat(e.totalValue)}),t.toFixed(2)}},{key:"removeSelectedStocks",value:function(){var e=this.state.stocks;this.state.selectedStock.forEach(function(t){e=e.filter(function(e){return e.name!==t})}),this.setState({stocks:e}),localStorage.setItem(this.props.name,JSON.stringify(e))}},{key:"drawGraph",value:function(){var e=this;this.setState({showGraph:!0}),this.state.stocks.forEach(function(t){var a="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+t.name+"&apikey=OHK5U5NEHY5FSE6A";T.a.get(a).then(function(a){if(a.data.Note)alert("Reached API-call-limit! Not showing "+t.name);else{if(e.state.stockValues.map(function(e){return e.name}).includes(t.name))return;var n=a.data["Time Series (Daily)"],o=e.getLast100StockValues(n),l=e.state.stockValues;l.push({name:t.name,y:o,x:Object.keys(n)}),e.setState({stockValues:l}),e.forceUpdate()}})})}},{key:"getLast100StockValues",value:function(e){return Object.keys(e).map(function(t){return(parseFloat(e[t]["1. open"])+parseFloat(e[t]["2. high"])+parseFloat(e[t]["3. low"])+parseFloat(e[t]["4. close"]))/4})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"portfolio"},o.a.createElement("div",{className:"portfolioTop"},o.a.createElement("p",{className:"row portfolioName"},this.props.name),o.a.createElement("button",{className:"row",value:"euro",onClick:function(){return e.changeCurrency("euro")}},"Show in \u20ac"),o.a.createElement("button",{className:"row",value:"USD",onClick:function(){return e.changeCurrency("USD")}},"Show in $"),o.a.createElement("button",{className:"row deletePortfolioBtn",onClick:function(){return e.props.removePortfolio(e.props.name)}},o.a.createElement("i",{className:"fa fa-close"}))),o.a.createElement(p,{stockTable:this.state.stocks,checkboxClick:function(t){return e.checkboxClick(t)},currency:this.state.currencyEur?" \u20ac":" $"}),o.a.createElement("div",{className:"portfolioBottom"},o.a.createElement("p",{className:"totalValue"},"Total value of ",this.props.name,": ",this.countTotalValue(),this.state.currencyEur?" \u20ac":" $"),o.a.createElement("button",{className:"row",onClick:function(){return e.setState({show:!0})}},"Add stock"),o.a.createElement(N,{show:this.state.show,addStock:function(t,a){return e.addStock(t,a)},stockSymbol:this.state.newStockSymbol,stockQuantity:this.state.newStockQuantity,handleChange:this.handleChange,handleClose:this.handleClose}),o.a.createElement("button",{className:"row",onClick:function(){return e.drawGraph()}},"Perf graph"),o.a.createElement(R,{showGraph:this.state.showGraph,portfolioName:this.props.name,stockValues:this.state.stockValues,handleChange:this.handleChange,handleClose:this.handleClose}),o.a.createElement("button",{className:"row lastBtn",onClick:function(){return e.removeSelectedStocks()}},"Remove selected")))}}]),t}(n.Component),F=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.newPortfolioName;return o.a.createElement(E.a,{open:this.props.showPortfolio,onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(j.a,{id:"form-dialog-title"},"Create new portfolio"),o.a.createElement(C.a,null,o.a.createElement(y.a,{autoFocus:!0,margin:"dense",name:"newPortfolioName",label:"Enter the portfolio name",type:"text",value:t,fullWidth:!0,onChange:this.props.handleChange})),o.a.createElement(g.a,null,o.a.createElement(b.a,{onClick:this.props.handleClose,color:"primary"},"Cancel"),o.a.createElement(b.a,{onClick:function(){return e.props.addNewPortfolio(t)},color:"primary"},"OK")))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleClose=function(){a.setState({showPortfolio:!1})},a.state={newPortfolioName:"",portfolios:[],showPortfolio:!1,EurToUSD:1},a.addNewPortfolio=a.addNewPortfolio.bind(Object(d.a)(Object(d.a)(a))),a.removePortfolio=a.removePortfolio.bind(Object(d.a)(Object(d.a)(a))),a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleClose=a.handleClose.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;T.a.get("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=EUR&to_currency=USD&apikey=OHK5U5NEHY5FSE6A").then(function(t){return e.setState({EurToUSD:t.data})});var t=Object.keys(localStorage);this.setState({portfolios:t})}},{key:"addNewPortfolio",value:function(e){var t=this.state.portfolios;t.length<10?e.length>0&&(t.push(e),this.setState({portfolios:t}),this.handleClose(),localStorage.setItem(e,JSON.stringify([])),this.setState({newPortfolioName:""})):(alert("You can only have 10 portfolios"),this.setState({newPortfolioName:""}),this.handleClose())}},{key:"removePortfolio",value:function(e){var t=this.state.portfolios;t.splice(t.indexOf(e),1),this.setState({portfolios:t}),localStorage.removeItem(e)}},{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("button",{onClick:function(){return e.setState({showPortfolio:!0})},className:"portfolioBtn"},"Add new portfolio"),o.a.createElement(F,{showPortfolio:this.state.showPortfolio,addNewPortfolio:function(t){return e.addNewPortfolio(t)},newPortfolioName:this.state.newPortfolioName,handleChange:this.handleChange,handleClose:this.handleClose}),o.a.createElement("div",null,this.state.portfolios.map(function(t){return o.a.createElement(A,{key:t,name:t,removePortfolio:function(t){return e.removePortfolio(t)},EurToUSD:e.state.EurToUSD})})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[107,2,1]]]);
//# sourceMappingURL=main.d68dc780.chunk.js.map